[gd_scene load_steps=12 format=3 uid="uid://duowqwgxey3gs"]

[ext_resource type="PackedScene" uid="uid://csr01dxydyrxj" path="res://assets/styloo/pew_edited.glb" id="1_sqm2m"]
[ext_resource type="Script" uid="uid://bngtodrpytder" path="res://assets/weapons/pew.gd" id="2_48531"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_sqm2m"]
animation = &"Shoot"

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_48531"]
fadein_time = 0.2
fadeout_time = 0.2

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_hv23d"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_khj2o"]
nodes/ShootAnimation/node = SubResource("AnimationNodeAnimation_sqm2m")
nodes/ShootAnimation/position = Vector2(-220, 140)
nodes/ShootOneShot/node = SubResource("AnimationNodeOneShot_48531")
nodes/ShootOneShot/position = Vector2(80, 80)
nodes/StateMachine/node = SubResource("AnimationNodeStateMachine_hv23d")
nodes/StateMachine/position = Vector2(-260, -80)
node_connections = [&"ShootOneShot", 0, &"StateMachine", &"ShootOneShot", 1, &"ShootAnimation", &"output", 0, &"ShootOneShot"]

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_48531"]
angle_min = -80.0
angle_max = 80.0
direction = Vector3(0, 1, 0)
spread = 0.0
gravity = Vector3(0, 0, 0)

[sub_resource type="Gradient" id="Gradient_hv23d"]
colors = PackedColorArray(1, 0.798472, 0.370863, 1, 0, 0, 0, 0)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_khj2o"]
gradient = SubResource("Gradient_hv23d")
fill = 2
fill_from = Vector2(0.5, 0.5)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_qka00"]
transparency = 1
albedo_texture = SubResource("GradientTexture2D_khj2o")
roughness = 0.0
emission_enabled = true
emission_energy_multiplier = 16.0
emission_texture = SubResource("GradientTexture2D_khj2o")
billboard_mode = 3
particles_anim_h_frames = 1
particles_anim_v_frames = 1
particles_anim_loop = false

[sub_resource type="QuadMesh" id="QuadMesh_2r0tm"]
material = SubResource("StandardMaterial3D_qka00")
size = Vector2(0.2, 0.2)

[node name="pew" node_paths=PackedStringArray("animationTree", "light", "emitter") instance=ExtResource("1_sqm2m")]
script = ExtResource("2_48531")
animationTree = NodePath("AnimationTree")
light = NodePath("MuzzleFlash/OmniLight3D")
emitter = NodePath("MuzzleFlash/GPUParticles3D")

[node name="AnimationTree" type="AnimationTree" parent="." index="2"]
tree_root = SubResource("AnimationNodeBlendTree_khj2o")
anim_player = NodePath("../AnimationPlayer")
parameters/ShootOneShot/active = false
parameters/ShootOneShot/internal_active = false
parameters/ShootOneShot/request = 0

[node name="MuzzleFlash" type="Node3D" parent="." index="3"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0566396, 0.0407808, 0)

[node name="OmniLight3D" type="OmniLight3D" parent="MuzzleFlash" index="0"]
visible = false
light_color = Color(0.962964, 0.881282, 0.83919, 1)
omni_range = 2.5

[node name="GPUParticles3D" type="GPUParticles3D" parent="MuzzleFlash" index="1"]
emitting = false
lifetime = 0.05
one_shot = true
explosiveness = 0.9
local_coords = true
process_material = SubResource("ParticleProcessMaterial_48531")
draw_pass_1 = SubResource("QuadMesh_2r0tm")
